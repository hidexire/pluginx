{% for child_name, child in fields %}
    {% if child.type and not child.validate.ignore %}
        {%- if child_name starts with '.' -%}
            {% set child_name = name ? name ~ child_name : child_name[1:] %}
            {% set child = child|merge({ name: child_name }) %}
        {% endif %}

        {% set child_value = form ? form.value(child_name) : data.value(child_name) %}
        {% block child_open %}{% endblock %}
        {% include ["forms/fields/#{child.type}/#{child.type}.html.twig", 'forms/fields/text/text.html.twig'] with {field: child, value: child_value} %}
        {% block child_close %}{% endblock %}
    {% endif %}
{% endfor %}
